<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงูุนุฑุจุฉ - ููุตุฉ ูุฑู</title>
    <link rel="stylesheet" href="styles/design-system.css">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/pages.css">
    <link rel="stylesheet" href="styles/pages-core.css">
    <link rel="stylesheet" href="styles/cart-enhanced.css">
</head>

<body class="rtl cart-page">
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="/index.html">
                    <img src="images/logo.png" alt="ููุตุฉ ูุฑู" class="logo">
                    <h1>ูุฑู</h1>
                </a>
            </div>
            <ul class="nav-menu">
                <li><a href="/index.html">ุงูุฑุฆูุณูุฉ</a></li>
                <li><a href="/browse-families.html">ุชุตูุญ ุงููุฌุงูุณ</a></li>
                <li><a href="/cart.html" class="active">ุงูุนุฑุจุฉ (<span id="cart-count">0</span>)</a></li>
            </ul>
            <div class="nav-actions">
                <button onclick="karamAuth.logout()" class="btn-login">ุชุณุฌูู ุฎุฑูุฌ</button>
            </div>
        </div>
    </nav>

    <!-- Cart Section -->
    <section class="cart-section">
        <div class="container">
            <h1>๐ ุนุฑุจุฉ ุงูุชุณูู</h1>

            <div class="cart-container">
                <!-- Cart Items -->
                <div class="cart-items">
                    <div id="cart-list">
                        <!-- Populated by JavaScript -->
                    </div>

                    <!-- Empty Cart -->
                    <div id="empty-cart" style="display:none; text-align:center; padding:80px 40px;">
                        <div style="font-size:100px; margin-bottom:20px;">๐</div>
                        <h3>ุงูุนุฑุจุฉ ูุงุฑุบุฉ</h3>
                        <p style="color:#666; margin:20px 0;">ุงุจุฏุฃ ุจุฅุถุงูุฉ ูุฌุงูุณ ููุนุฑุจุฉ</p>
                        <a href="/browse-families.html" class="btn-primary">
                            ุชุตูุญ ุงููุฌุงูุณ
                        </a>
                    </div>
                </div>

                <!-- Cart Summary -->
                <div class="cart-summary" id="cart-summary-section" style="display:none;">
                    <h3>ููุฎุต ุงูุทูุจ</h3>

                    <div class="summary-row">
                        <span>ุนุฏุฏ ุงููุฌุงูุณ</span>
                        <strong id="total-items">0</strong>
                    </div>

                    <div class="summary-row">
                        <span>ุงููุฌููุน ุงููุฑุนู</span>
                        <strong id="subtotal">0 ุฑูุงู</strong>
                    </div>

                    <div class="summary-row">
                        <span>ุฑุณูู ุงูุฎุฏูุฉ (5%)</span>
                        <strong id="service-fee">0 ุฑูุงู</strong>
                    </div>

                    <div class="summary-row total">
                        <span>ุงููุฌููุน ุงูููู</span>
                        <strong id="total">0 ุฑูุงู</strong>
                    </div>

                    <!-- Booking Details -->
                    <div class="booking-details">
                        <h4>ุชูุงุตูู ุงูุญุฌุฒ</h4>

                        <div class="form-group">
                            <label>๐ ุชุงุฑูุฎ ุงูุฒูุงุฑุฉ</label>
                            <input type="date" id="visit-date" required min="">
                        </div>

                        <div class="form-group">
                            <label>โฐ ููุช ุงูุฒูุงุฑุฉ</label>
                            <select id="visit-time" required>
                                <option value="">ุงุฎุชุฑ ุงูููุช</option>
                                <option value="morning">ุตุจุงุญุงู (8:00 - 12:00)</option>
                                <option value="afternoon">ุธูุฑุงู (12:00 - 16:00)</option>
                                <option value="evening">ูุณุงุกู (16:00 - 20:00)</option>
                                <option value="night">ูููุงู (20:00 - 24:00)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>๐ฅ ุนุฏุฏ ุงูุถููู</label>
                            <input type="number" id="guest-count" required min="1" placeholder="ูุซุงู: 10">
                        </div>

                        <div class="form-group">
                            <label>๐ ููุงุญุธุงุช ุฅุถุงููุฉ (ุงุฎุชูุงุฑู)</label>
                            <textarea id="notes" rows="3" placeholder="ุงูุชุจ ุฃู ููุงุญุธุงุช ุฃู ุทูุจุงุช ุฎุงุตุฉ..."></textarea>
                        </div>
                    </div>

                    <button onclick="cartManager.proceedToCheckout()" class="btn-checkout">
                        ูุชุงุจุนุฉ ููุฏูุน
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Checkout Modal -->
    <div id="checkout-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>๐ณ ุฅุชูุงู ุงูุฏูุน</h2>
                <button onclick="cartManager.closeCheckoutModal()" class="btn-close">โ</button>
            </div>

            <div class="modal-body">
                <div class="checkout-summary">
                    <h3>ููุฎุต ุงูุทูุจ</h3>
                    <div id="checkout-items-list"></div>
                    <div class="checkout-total">
                        <span>ุงููุฌููุน ุงูููู</span>
                        <strong id="checkout-total">0 ุฑูุงู</strong>
                    </div>
                </div>

                <div class="payment-section">
                    <h3>ุทุฑููุฉ ุงูุฏูุน</h3>
                    <p style="margin-bottom:20px; color:#666;">
                        ุงูุฏูุน ุขูู ููุดูุฑ ุนุจุฑ ุจูุงุจุฉ Moyasar
                    </p>

                    <div id="payment-form">
                        <!-- Moyasar payment form will be inserted here -->
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button onclick="cartManager.processPayment()" class="btn-primary btn-large" id="pay-btn">
                    <span>๐ณ ุงุฏูุน ุงูุขู</span>
                    <div class="spinner" style="display:none;"></div>
                </button>
                <button onclick="cartManager.closeCheckoutModal()" class="btn-secondary">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <img src="images/logo.png" alt="ููุตุฉ ูุฑู" class="logo" style="width:60px; margin-bottom:10px;">
                    <h3>ููุตุฉ ูุฑู</h3>
                    <p>ููุตุฉ ุถูุงูุฉ ุณุนูุฏูุฉ ุฃุตููุฉ</p>
                </div>
                <div class="footer-col">
                    <h4>ุฑูุงุจุท ุณุฑูุนุฉ</h4>
                    <ul>
                        <li><a href="/index.html">ุงูุฑุฆูุณูุฉ</a></li>
                        <li><a href="/browse-families.html">ุชุตูุญ ุงููุฌุงูุณ</a></li>
                        <li><a href="/faq.html">ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>ุชูุงุตู ูุนูุง</h4>
                    <p>๐ง info@karam.sa</p>
                    <p>๐ฑ +966 50 000 0000</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 ููุตุฉ ูุฑู. ุฌููุน ุงูุญููู ูุญููุธุฉ.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.moyasar.com/mpf/1.10.0/moyasar.js"></script>
    <script src="/js/supabase-client.js"></script>
    <script src="/js/i18n.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/moyasar-payment.js"></script>
    <script src="/js/cart.js"></script>
</body>

</html>