# ุฏููู ุฅุนุฏุงุฏ ูุธุงู ุงูุฏูุน ูุน ููุณุฑ

## ูุธุฑุฉ ุนุงูุฉ

ููุณุฑ ูู ุจูุงุจุฉ ุฏูุน ุณุนูุฏูุฉ ูุนุชูุฏุฉ ูู ูุคุณุณุฉ ุงูููุฏ ุงูุนุฑุจู ุงูุณุนูุฏู (ุณุงูุง)ุ ูุชููุฑ ุญููู ุฏูุน ุขููุฉ ูุณููุฉ ุงูุงุณุชุฎุฏุงู.

---

## ุงููุชุทูุจุงุช

1. ุญุณุงุจ ูู ููุณุฑ (moyasar.com)
2. ููุงุชูุญ API (ูุงุจูุฉ ููุงุฎุชุจุงุฑ ูุงูุฅูุชุงุฌ)
3. ุดูุงุฏุฉ SSL ูููููุน (HTTPS)

---

## ุฎุทูุงุช ุงูุชุณุฌูู ูู ููุณุฑ

### 1. ุฅูุดุงุก ุญุณุงุจ

1. ุงุฐูุจ ุฅูู [moyasar.com](https://moyasar.com)
2. ุงููุฑ ุนูู "ุณุฌู ุงูุขู"
3. ุงููุฃ ุจูุงูุงุช ุดุฑูุชู:
   - ุงุณู ุงูุดุฑูุฉ
   - ุงูุณุฌู ุงูุชุฌุงุฑู
   - ุจูุงูุงุช ุงููุณุคูู
   - ูุนูููุงุช ุงูุชูุงุตู

### 2. ุงูุชุญูู ูู ุงููููุฉ

1. ูุฏูู ุงููุณุชูุฏุงุช ุงููุทููุจุฉ:
   - ุงูุณุฌู ุงูุชุฌุงุฑู
   - ุดูุงุฏุฉ ุงูุฒูุงุฉ ูุงูุฏุฎู
   - ูููุฉ ุงููุณุคูู
2. ุงูุชุธุฑ ุงูููุงููุฉ (ุนุงุฏุฉ 1-3 ุฃูุงู ุนูู)

### 3. ุงูุญุตูู ุนูู API Keys

ุจุนุฏ ุงูููุงููุฉ ุนูู ุงูุญุณุงุจ:

1. ุงุฐูุจ ุฅูู "ุงูุฅุนุฏุงุฏุงุช" โ "API Keys"
2. ุณุชุฌุฏ ููุชุงุญูู:
   - `Publishable Key` (pk_test_xxx) - ููุงุฎุชุจุงุฑ
   - `Secret Key` (sk_test_xxx) - ุณุฑูุ ููุฎุงุฏู ููุท

**โ๏ธ ุชุญุฐูุฑ**: ูุง ุชุดุงุฑู ุงูููุชุงุญ ุงูุณุฑู ุฃุจุฏุงู!

---

## ุงูุชูุงูู ูุน ุงููุดุฑูุน

### 1. ุชุญุฏูุซ ููุงุชูุญ API

ุงูุชุญ ููู `js/payment.js` ูุญุฏูุซ ุงูููุงุชูุญ:

```javascript
const MOYASAR_CONFIG = {
    publishableKey: 'pk_test_YOUR_KEY_HERE', // ุงุณุชุจุฏู ุจููุชุงุญู
    apiUrl: 'https://api.moyasar.com/v1',
};
```

### 2. ุฅุถุงูุฉ ุณูุฑูุจุช ููุณุฑ ููุตูุญุงุช

ูู ุฃู ุตูุญุฉ ุชุญุชุงุฌ ุงูุฏูุนุ ุฃุถู:

```html
<!-- ูู head -->
<link rel="stylesheet" href="styles/payment.css">

<!-- ูุจู </body> -->
<script src="js/payment.js"></script>
```

### 3. ุงุณุชุฏุนุงุก ูููุฐุฌ ุงูุฏูุน

```javascript
// ุนูุฏ ุงูุถุบุท ุนูู ุฒุฑ "ุฅุชูุงู ุงูุฏูุน"
const bookingData = {
    items: cart.getItems(),
    totalAmount: cart.getTotal(),
    userEmail: 'user@example.com',
    userName: 'ุงุณู ุงููุณุชุฎุฏู'
};

createCheckout(bookingData);
```

---

## ุทุฑู ุงูุฏูุน ุงููุฏุนููุฉ

ููุณุฑ ูุฏุนู:

- โ **ุงูุจุทุงูุงุช ุงูุงุฆุชูุงููุฉ** (Visa, Mastercard)
- โ **ูุฏู** (ุจุทุงูุงุช ุงูุฎุตู ุงูุณุนูุฏูุฉ)
- โ **Apple Pay**
- โ **STC Pay**

ููููู ุชุฎุตูุต ุงูุทุฑู ุงููุชุงุญุฉ ูู:

```javascript
methods: ['creditcard', 'applepay', 'stcpay']
```

---

## Webhook ููุฅุดุนุงุฑุงุช

ูุงุณุชูุจุงู ุฅุดุนุงุฑุงุช ููุฑูุฉ ุนูุฏ ูุฌุงุญ/ูุดู ุงูุฏูุน:

### 1. ุฅูุดุงุก Webhook Endpoint

```javascript
// ูุซุงู ุจุงุณุชุฎุฏุงู Node.js
app.post('/moyasar-webhook', express.json(), (req, res) => {
    const payment = req.body;
    
    // ุงูุชุญูู ูู ุงูุชูููุน
    const signature = req.headers['x-moyasar-signature'];
    if (!verifySignature(payment, signature)) {
        return res.status(401).send('Invalid signature');
    }
    
    // ูุนุงูุฌุฉ ุงูุฏูุน
    handlePaymentWebhook(payment);
    
    res.status(200).send('OK');
});
```

### 2. ุชุณุฌูู Webhook ูู ููุญุฉ ููุณุฑ

1. ุงุฐูุจ ุฅูู "ุงูุฅุนุฏุงุฏุงุช" โ "Webhooks"
2. ุฃุถู URL ุงูุฎุงุต ุจู: `https://yoursite.com/moyasar-webhook`
3. ุงุฎุชุฑ ุงูุฃุญุฏุงุซ: `payment.paid`, `payment.failed`, etc.

---

## ุงูุชุนุงูู ูุน ุงูุจูุฆุงุช

### ุจูุฆุฉ ุงูุงุฎุชุจุงุฑ (Test Mode)

```javascript
// ุงุณุชุฎุฏู ููุงุชูุญ ุงูุงุฎุชุจุงุฑ
publishableKey: 'pk_test_...'
```

**ุจุทุงูุงุช ุงุฎุชุจุงุฑ**:
- ุฑูู ุงูุจุทุงูุฉ: `4111 1111 1111 1111`
- CVV: ุฃู 3 ุฃุฑูุงู
- ุงูุชุงุฑูุฎ: ุฃู ุชุงุฑูุฎ ูุณุชูุจูู

### ุจูุฆุฉ ุงูุฅูุชุงุฌ (Live Mode)

```javascript
// ุงุณุชุฎุฏู ููุงุชูุญ ุงูุฅูุชุงุฌ
publishableKey: 'pk_live_...'
```

**โ๏ธ ููู**: ุชุฃูุฏ ูู:
- ุชูุนูู HTTPS
- ุฅุฎูุงุก ุงูููุชุงุญ ุงูุณุฑู
- ุงุฎุชุจุงุฑ ุดุงูู ูุจู ุงูุฅุทูุงู

---

## ุงูุฃูุงู

### 1. ุญูุงูุฉ ุงูููุงุชูุญ

```javascript
// โ ุตุญ - ุงุณุชุฎุฏุงู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
const MOYASAR_SECRET = process.env.MOYASAR_SECRET_KEY;

// โ ุฎุทุฃ - ูุชุงุจุฉ ุงูููุชุงุญ ูุจุงุดุฑุฉ
const MOYASAR_SECRET = 'sk_live_xxx';
```

### 2. ุงูุชุญูู ูู ุตุญุฉ ุงูุฏูุน

```javascript
// ุชุญูู ุฏุงุฆูุงู ูู ุญุงูุฉ ุงูุฏูุน ูุจู ุชุฃููุฏ ุงูุทูุจ
const payment = await verifyPayment(paymentId);
if (payment.status === 'paid') {
    // ุฃููุฏ ุงูุทูุจ
}
```

### 3. PCI Compliance

ููุณุฑ ูุนุชูุฏ ูู PCI DSS Level 1ุ ูุฐูู:
- ูุง ุชุฎุฒู ุจูุงูุงุช ุงูุจุทุงูุงุช
- ุงุณุชุฎุฏู ูููุฐุฌ ููุณุฑ ุงููุจุงุดุฑ
- ูุง ุชุฑุณู ุจูุงูุงุช ุญุณุงุณุฉ ุนุจุฑ GET

---

## ุงุณุชุฑุฌุงุน ุงููุจุงูุบ (Refunds)

```javascript
// ุงุณุชุฑุฌุงุน ูุงูู
await refundPayment(paymentId);

// ุงุณุชุฑุฌุงุน ุฌุฒุฆู (ุจุงููููุงุช)
await refundPayment(paymentId, 5000); // 50 ุฑูุงู
```

**ุณูุงุณุฉ ุงูุงุณุชุฑุฌุงุน**:
- ูุชุงุญ ุฎูุงู 180 ููู ูู ุงูุฏูุน
- ูุณุชุบุฑู 5-10 ุฃูุงู ุนูู
- ูุนูุฏ ูููุตุฏุฑ ุงูุฃุตูู ููุฏูุน

---

## ุงูุฑุณูู ูุงูุนูููุงุช

### ุฑุณูู ููุณุฑ ุงูุงูุชุฑุงุถูุฉ:
- **ูุฏู**: 1.15% + 1 ุฑูุงู
- **ููุฒุง/ูุงุณุชุฑูุงุฑุฏ**: 2.35% + 1 ุฑูุงู
- **Apple Pay**: 2.35% + 1 ุฑูุงู
- **STC Pay**: 1.5%

**ููุงุญุธุฉ**: ุงูุฑุณูู ูุฏ ุชุฎุชูู ุญุณุจ ุญุฌู ุงููุนุงููุงุช

---

## ุงูุชูุงุฑูุฑ ูุงูุฅุญุตุงุฆูุงุช

ูู ููุญุฉ ุชุญูู ููุณุฑ ููููู:

- ๐ ุนุฑุถ ุชูุงุฑูุฑ ุงููุจูุนุงุช
- ๐ฐ ุชุชุจุน ุงูุฃุฑุจุงุญ
- ๐ ุชุญููู ุทุฑู ุงูุฏูุน
- ๐ฅ ุชุตุฏูุฑ ุงูุจูุงูุงุช (CSV, PDF)

---

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ: "Invalid API Key"
- ุชุฃูุฏ ูู ูุณุฎ ุงูููุชุงุญ ุจุดูู ุตุญูุญ
- ุชุญูู ูู ุงุณุชุฎุฏุงู ุงูููุชุงุญ ุงูุตุญูุญ (test/live)

### ุฎุทุฃ: "Payment Failed"
- ุชุญูู ูู ุฑุตูุฏ ุงูุจุทุงูุฉ
- ุชุฃูุฏ ูู ุตุญุฉ ุจูุงูุงุช ุงูุจุทุงูุฉ
- ุชุญูู ูู ุฃู ุงูุจุทุงูุฉ ููุนูุฉ ููุฏูุน ุงูุฅููุชุฑููู

### ุฎุทุฃ: "Webhook not received"
- ุชุญูู ูู URL ุงูู Webhook
- ุชุฃูุฏ ูู ุฃู ุงูุณุฑูุฑ ูุณุชูุจู POST requests
- ุฑุงุฌุน logs ููุณุฑ ูู ููุญุฉ ุงูุชุญูู

---

## ููุงุฑุฏ ุฅุถุงููุฉ

- ๐ [ุชูุซูู ููุณุฑ ุงูุฑุณูู](https://moyasar.com/docs/)
- ๐ฌ [ุงูุฏุนู ุงูููู](https://moyasar.com/support)
- ๐ง ุงูุจุฑูุฏ: support@moyasar.com
- ๐ ุงููุงุชู: ูกูจูู ูกูขูค ูงููงูง

---

## ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. โ ุฅูุดุงุก ุญุณุงุจ ููุณุฑ
2. โ ุงูุญุตูู ุนูู API Keys
3. โ ุชุญุฏูุซ `js/payment.js`
4. โ ุงุฎุชุจุงุฑ ูู ุจูุฆุฉ Test
5. โ ุฅุนุฏุงุฏ Webhook
6. โ ุงูุงูุชูุงู ูุจูุฆุฉ ุงูุฅูุชุงุฌ

---

**ุฌุงูุฒ ููุฅุทูุงู!** ๐
